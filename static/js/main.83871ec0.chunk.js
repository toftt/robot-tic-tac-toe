(this["webpackJsonptic-tac-toe-app"]=this["webpackJsonptic-tac-toe-app"]||[]).push([[0],{14:function(e,t,r){var n=r(24),o=[];e.exports=function(){var e=new Worker(r.p+"7362b3c3f320ddb0e423.worker.js",{name:"[hash].worker.js"});return n(e,o),e}},18:function(e,t,r){e.exports=r(28)},27:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);var n,o=r(0),a=r.n(o),i=r(13),c=r.n(i),u=r(3),s=r.n(u),l=r(7),h=r(4),p=r(5),d=r(6),v=r(1),f=r(2);!function(e){e.IN_PROGRESS="IN_PROGRESS",e.DRAW="DRAW",e.PLAYER_X="PLAYER_X",e.PLAYER_O="PLAYER_O"}(n||(n={}));var m=r(11),b=[448,56,7,292,146,73,273,84],y=function(){function e(){Object(v.a)(this,e),this.presence=0,this.color=0,this.lastPerformedMove=null,this.printEachMove=!1}return Object(f.a)(e,[{key:"clone",value:function(){var t=new e;return t.presence=this.presence,t.color=this.color,t.lastPerformedMove=this.lastPerformedMove,t}},{key:"exportBoard",value:function(){return{presence:this.presence,color:this.color}}},{key:"getAvailableMoves",value:function(){var e=this;return this.checkStatus()!==n.IN_PROGRESS?[]:new Array(9).fill(void 0).map((function(e,t){return t})).filter((function(t){return 0===(Math.pow(2,t)&e.presence)}))}},{key:"performMove",value:function(e,t){var r=Math.pow(2,e);this.presence=this.presence|r,t&&(this.color=this.color|r)}},{key:"checkStatus",value:function(){var e=this;return b.some((function(t){return(e.presence&t&e.color)===t}))?n.PLAYER_X:b.some((function(t){return(e.presence&t&~e.color)===t}))?n.PLAYER_O:511===this.presence?n.DRAW:n.IN_PROGRESS}},{key:"getOpposedStatus",value:function(e){return e===n.PLAYER_O?n.PLAYER_X:n.PLAYER_O}},{key:"getRows",value:function(){var e=this;return new Array(9).fill(void 0).map((function(e,t){return t})).map((function(t){var r=Math.pow(2,t);return 0===(r&e.presence)?"empty":0===(r&e.presence&e.color)?"player2":"player1"}))}},{key:"getPrintedRows",value:function(){for(var e=[],t=0;t<3;t++){for(var r=[],n=0;n<3;n++){var o=3*t+n;if(Math.pow(2,o)&this.presence){var a=Math.pow(2,o)&this.color;r.push(a?"x":"o")}else r.push(" ")}e.push("| ".concat(r.join(" ")," |"))}return e}}],[{key:"importBoard",value:function(t){var r=new e;return r.presence=t.presence,r.color=t.color,r}}]),e}(),O=[448,56,7,292,146,73,273,84],R=function(){function e(){Object(v.a)(this,e),this.printEachMove=!1,this.currentBoard=null,this.presence=0,this.color=0,this.playerOneToMove=!0,this.boards=[];for(var t=0;t<9;t++)this.boards.push(new y)}return Object(f.a)(e,[{key:"clone",value:function(){var t=new e;return t.currentBoard=this.currentBoard,t.presence=this.presence,t.color=this.color,t.playerOneToMove=this.playerOneToMove,t.boards=this.boards.map((function(e){return e.clone()})),t}},{key:"exportBoard",value:function(){return{color:this.color,presence:this.presence,currentBoard:this.currentBoard,boards:this.boards.map((function(e){return e.exportBoard()})),playerOneToMove:this.playerOneToMove}}},{key:"getAvailableMovesForOuterGrid",value:function(){var e=this;return new Array(9).fill(void 0).map((function(e,t){return t})).filter((function(t){return 0===(Math.pow(2,t)&e.presence)}))}},{key:"getAvailableMoves",value:function(){var e=this;if(null!==this.currentBoard)return this.boards[this.currentBoard].getAvailableMoves();var t=[];return this.getAvailableMovesForOuterGrid().forEach((function(r){var o=e.boards[r];o.checkStatus()===n.IN_PROGRESS&&o.getAvailableMoves().forEach((function(e){t.push(10*r+e+10)}))})),t}},{key:"getPlayerToMove",value:function(){return this.playerOneToMove?n.PLAYER_X:n.PLAYER_O}},{key:"getLatestPlayerToMove",value:function(){return this.playerOneToMove?n.PLAYER_O:n.PLAYER_X}},{key:"updatePresenceAndColor",value:function(e){var t=this.boards[e].checkStatus();if(t!==n.IN_PROGRESS&&t!==n.DRAW){var r=Math.pow(2,e);this.presence=this.presence|r,t===n.PLAYER_X&&(this.color=this.color|r)}}},{key:"performMove",value:function(e){var t=e<9?this.currentBoard:Math.floor(e/10)-1,r=e<9?e:e%10;this.boards[t].performMove(r,this.playerOneToMove),this.boards[r].checkStatus()===n.IN_PROGRESS?this.currentBoard=r:this.currentBoard=null,this.updatePresenceAndColor(t),this.playerOneToMove=!this.playerOneToMove,this.printEachMove&&this.printBoard()}},{key:"getBoards",value:function(){return this.boards.map((function(e){return e.getRows()}))}},{key:"checkStatus",value:function(){var e=this;if(O.some((function(t){return(e.presence&t&e.color)===t})))return n.PLAYER_X;if(O.some((function(t){return(e.presence&t&~e.color)===t})))return n.PLAYER_O;if(0===this.getAvailableMoves().length){var t=this.boards.reduce((function(e,t){return t.checkStatus()===n.PLAYER_O?Object(m.a)({},e,{playerO:e.playerO+1}):t.checkStatus()===n.PLAYER_X?Object(m.a)({},e,{playerX:e.playerX+1}):e}),{playerO:0,playerX:0});return t.playerO>t.playerX?n.PLAYER_O:t.playerX>t.playerO?n.PLAYER_X:n.DRAW}return n.IN_PROGRESS}},{key:"getOpposedStatus",value:function(e){return e===n.PLAYER_O?n.PLAYER_X:n.PLAYER_O}},{key:"printBoard",value:function(){for(var e=[],t=0;t<3;t++){for(var r=[[],[],[]],n=0;n<3;n++){var o=3*t+n,a=this.boards[o].getPrintedRows(),i=Object(h.a)(a,3),c=i[0],u=i[1],s=i[2];r[0].push(c),r[1].push(u),r[2].push(s)}var l=r.map((function(e){return e.join("    ")})).join("\n");e.push(l)}console.log("\nGame status: ".concat(this.checkStatus()," -- Current square: ").concat(null!==this.currentBoard?this.currentBoard+1:"None","\n\n").concat(e.join("\n\n"),"\n"))}}],[{key:"importBoard",value:function(t){var r=new e;return r.color=t.color,r.presence=t.presence,r.currentBoard=t.currentBoard,r.boards=t.boards.map((function(e){return y.importBoard(e)})),r.playerOneToMove=t.playerOneToMove,r}}]),e}(),E=r(14),g=r.n(E),P=function(e){switch(e){case"easy":return 3e3;case"intermediate":return 5e3;case"hard":return 1e4}},k=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.PLAYER_X;Object(v.a)(this,e),this.humanPlayer=n.PLAYER_X,this.board=new R,this.worker=void 0,this.resolvePromise=void 0,this.humanPlayer=r,this.worker=new g.a,this.worker.onmessage=function(e){"RPC"!==e.data.type&&t.resolvePromise(e.data)}}return Object(f.a)(e,[{key:"getBoard",value:function(){return this.board}},{key:"getState",value:function(){return{grid:this.board.getBoards(),selectedSquare:this.board.currentBoard,currentPlayer:this.board.getPlayerToMove(),winStatus:this.board.checkStatus()}}},{key:"performMove",value:function(e){return this.board.getAvailableMoves().includes(e)?(console.log("performed move: ".concat(e)),this.board.performMove(e),this.getState()):(console.log("tried to perform move ".concat(e,".\n available moves are \n ").concat(JSON.stringify(this.board.getAvailableMoves()))),this.getState())}},{key:"getNextAiMove",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,o,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e){i.resolvePromise=e})),o=P(t),this.worker.postMessage([this.board.exportBoard(),n.PLAYER_O,o]),e.next=5,r;case 5:a=e.sent,this.board=R.importBoard(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function w(){var e=Object(p.a)(["\n  border: 1px solid black;\n  background-color: ",";\n"]);return w=function(){return e},e}function S(){var e=Object(p.a)(["\n  & > button {\n    font-size: 1.5rem;\n    background-color: white;\n    border-radius: 8px;\n    padding: 8px;\n    cursor: pointer;\n    -webkit-appearance: none;\n\n    &:not(:last-child) {\n      margin-right: 16px;\n    }\n  }\n"]);return S=function(){return e},e}function A(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n\n  ",";\n  ","\n  ","\n  ","\n"]);return A=function(){return e},e}function M(){var e=Object(p.a)(["\n  width: 60vmin;\n  height: 60vmin;\n\n  @media (max-width: 768px) {\n    width: 80vmin;\n    height: 80vmin;\n  }\n\n  @media (max-width: 480px) {\n    width: 95vmin;\n    height: 95vmin;\n  }\n"]);return M=function(){return e},e}function _(){var e=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n"]);return _=function(){return e},e}var L=d.a.div(_()),Y=d.a.div(M()),x=d.a.div(A(),(function(e){return e.gap&&"\n  grid-gap: 64px;\n\n  @media (max-width: 768px) {\n    grid-gap: 16px;\n  }\n\n  @media (max-width: 480px) {\n    grid-gap: 8px\n  }\n\n          "}),(function(e){return e.isWon===n.PLAYER_X&&"border: 3px solid blue"}),(function(e){return e.isWon===n.PLAYER_O&&"border: 3px solid green"}),(function(e){return e.isSelected&&"border: 3px solid yellow"})),B=d.a.div(S()),j=d.a.div(w(),(function(e){return function(e){switch(e){case"empty":return"white";case"player1":return"blue";case"player2":return"green"}}(e.state)})),X=new k,I=function(){var e=Object(o.useState)(X.getState()),t=Object(h.a)(e,2),r=t[0],i=r.grid,c=r.selectedSquare,u=r.currentPlayer,p=r.winStatus,d=t[1],v=Object(o.useState)(null),f=Object(h.a)(v,2),m=f[0],b=f[1],y=Object(o.useState)(null),O=Object(h.a)(y,2),R=O[0],E=O[1];return Object(o.useEffect)((function(){b(null)}),[c]),Object(o.useEffect)((function(){u===n.PLAYER_O&&function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X.getNextAiMove(R);case 4:d(X.getState());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u,R]),a.a.createElement(L,null,null===R?a.a.createElement(B,null,a.a.createElement("h1",null,"Select difficulty"),a.a.createElement("button",{onClick:function(){return E("easy")}},"Easy"),a.a.createElement("button",{onClick:function(){return E("intermediate")}},"Intermediate"),a.a.createElement("button",{onClick:function(){return E("hard")}},"Hard")):a.a.createElement(Y,null,p!==n.IN_PROGRESS&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,function(e){var t="";switch(e){case n.PLAYER_O:t="Robot wins! Better luck next time.";break;case n.PLAYER_X:t="You win! Congratulations!";break;case n.DRAW:t="It's a draw!"}return"".concat(t," To start a new game, refresh the page.")}(p)),a.a.createElement("button",{onClick:function(){return window.location.reload()}},"Refresh")),p===n.IN_PROGRESS?u===n.PLAYER_X?a.a.createElement("p",null,"It is your turn to move"):a.a.createElement("p",null,"Robot is thinking..."):null,a.a.createElement(x,{gap:!0},i.map((function(e,t){return a.a.createElement(x,{key:t,isWon:[n.PLAYER_O,n.PLAYER_X].includes(X.getBoard().boards[t].checkStatus())&&X.getBoard().boards[t].checkStatus(),isSelected:t===c||t===m,onClick:function(){return e=t,void(u===n.PLAYER_X&&p===n.IN_PROGRESS&&X.getBoard().boards[e].checkStatus()===n.IN_PROGRESS&&null===c&&b(e));var e}},e.map((function(e,r){return a.a.createElement(j,{key:r,onClick:function(e){return function(e,t,r){if(u===n.PLAYER_X&&p===n.IN_PROGRESS&&(c===t&&(e.stopPropagation(),X.performMove(r),d(X.getState())),m===t)){var o=X.performMove(10*(m+1)+r);d(o)}}(e,t,r)},state:e})})))})))))};r(27);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.83871ec0.chunk.js.map