(this["webpackJsonptic-tac-toe-app"]=this["webpackJsonptic-tac-toe-app"]||[]).push([[0],{14:function(e,t,n){var r=n(24),o=[];e.exports=function(){var e=new Worker(n.p+"7362b3c3f320ddb0e423.worker.js",{name:"[hash].worker.js"});return r(e,o),e}},18:function(e,t,n){e.exports=n(28)},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o),i=n(13),c=n.n(i),u=n(3),s=n.n(u),l=n(7),h=n(4),p=n(5),d=n(6),f=n(1),v=n(2);!function(e){e.IN_PROGRESS="IN_PROGRESS",e.DRAW="DRAW",e.PLAYER_X="PLAYER_X",e.PLAYER_O="PLAYER_O"}(r||(r={}));var b=n(11),m=[448,56,7,292,146,73,273,84],y=function(){function e(){Object(f.a)(this,e),this.presence=0,this.color=0,this.lastPerformedMove=null,this.printEachMove=!1}return Object(v.a)(e,[{key:"clone",value:function(){var t=new e;return t.presence=this.presence,t.color=this.color,t.lastPerformedMove=this.lastPerformedMove,t}},{key:"exportBoard",value:function(){return{presence:this.presence,color:this.color}}},{key:"getAvailableMoves",value:function(){var e=this;return this.checkStatus()!==r.IN_PROGRESS?[]:new Array(9).fill(void 0).map((function(e,t){return t})).filter((function(t){return 0===(Math.pow(2,t)&e.presence)}))}},{key:"performMove",value:function(e,t){var n=Math.pow(2,e);this.presence=this.presence|n,t&&(this.color=this.color|n)}},{key:"checkStatus",value:function(){var e=this;return m.some((function(t){return(e.presence&t&e.color)===t}))?r.PLAYER_X:m.some((function(t){return(e.presence&t&~e.color)===t}))?r.PLAYER_O:511===this.presence?r.DRAW:r.IN_PROGRESS}},{key:"getOpposedStatus",value:function(e){return e===r.PLAYER_O?r.PLAYER_X:r.PLAYER_O}},{key:"getRows",value:function(){var e=this;return new Array(9).fill(void 0).map((function(e,t){return t})).map((function(t){var n=Math.pow(2,t);return 0===(n&e.presence)?"empty":0===(n&e.presence&e.color)?"player2":"player1"}))}},{key:"getPrintedRows",value:function(){for(var e=[],t=0;t<3;t++){for(var n=[],r=0;r<3;r++){var o=3*t+r;if(Math.pow(2,o)&this.presence){var a=Math.pow(2,o)&this.color;n.push(a?"x":"o")}else n.push(" ")}e.push("| ".concat(n.join(" ")," |"))}return e}}],[{key:"importBoard",value:function(t){var n=new e;return n.presence=t.presence,n.color=t.color,n}}]),e}(),g=[448,56,7,292,146,73,273,84],R=function(){function e(){Object(f.a)(this,e),this.printEachMove=!1,this.currentBoard=null,this.presence=0,this.color=0,this.playerOneToMove=!0,this.boards=[];for(var t=0;t<9;t++)this.boards.push(new y)}return Object(v.a)(e,[{key:"clone",value:function(){var t=new e;return t.currentBoard=this.currentBoard,t.presence=this.presence,t.color=this.color,t.playerOneToMove=this.playerOneToMove,t.boards=this.boards.map((function(e){return e.clone()})),t}},{key:"exportBoard",value:function(){return{color:this.color,presence:this.presence,currentBoard:this.currentBoard,boards:this.boards.map((function(e){return e.exportBoard()})),playerOneToMove:this.playerOneToMove}}},{key:"getAvailableMovesForOuterGrid",value:function(){var e=this;return new Array(9).fill(void 0).map((function(e,t){return t})).filter((function(t){return 0===(Math.pow(2,t)&e.presence)}))}},{key:"getAvailableMoves",value:function(){var e=this;if(null!==this.currentBoard)return this.boards[this.currentBoard].getAvailableMoves();var t=[];return this.getAvailableMovesForOuterGrid().forEach((function(n){var o=e.boards[n];o.checkStatus()===r.IN_PROGRESS&&o.getAvailableMoves().forEach((function(e){t.push(10*n+e+10)}))})),t}},{key:"getPlayerToMove",value:function(){return this.playerOneToMove?r.PLAYER_X:r.PLAYER_O}},{key:"getLatestPlayerToMove",value:function(){return this.playerOneToMove?r.PLAYER_O:r.PLAYER_X}},{key:"updatePresenceAndColor",value:function(e){var t=this.boards[e].checkStatus();if(t!==r.IN_PROGRESS&&t!==r.DRAW){var n=Math.pow(2,e);this.presence=this.presence|n,t===r.PLAYER_X&&(this.color=this.color|n)}}},{key:"performMove",value:function(e){var t=e<9?this.currentBoard:Math.floor(e/10)-1,n=e<9?e:e%10;this.boards[t].performMove(n,this.playerOneToMove),this.boards[n].checkStatus()===r.IN_PROGRESS?this.currentBoard=n:this.currentBoard=null,this.updatePresenceAndColor(t),this.playerOneToMove=!this.playerOneToMove,this.printEachMove&&this.printBoard()}},{key:"getBoards",value:function(){return this.boards.map((function(e){return e.getRows()}))}},{key:"checkStatus",value:function(){var e=this;if(g.some((function(t){return(e.presence&t&e.color)===t})))return r.PLAYER_X;if(g.some((function(t){return(e.presence&t&~e.color)===t})))return r.PLAYER_O;if(0===this.getAvailableMoves().length){var t=this.boards.reduce((function(e,t){return t.checkStatus()===r.PLAYER_O?Object(b.a)({},e,{playerO:e.playerO+1}):t.checkStatus()===r.PLAYER_X?Object(b.a)({},e,{playerX:e.playerX+1}):e}),{playerO:0,playerX:0});return t.playerO>t.playerX?r.PLAYER_O:t.playerX>t.playerO?r.PLAYER_X:r.DRAW}return r.IN_PROGRESS}},{key:"getOpposedStatus",value:function(e){return e===r.PLAYER_O?r.PLAYER_X:r.PLAYER_O}},{key:"printBoard",value:function(){for(var e=[],t=0;t<3;t++){for(var n=[[],[],[]],r=0;r<3;r++){var o=3*t+r,a=this.boards[o].getPrintedRows(),i=Object(h.a)(a,3),c=i[0],u=i[1],s=i[2];n[0].push(c),n[1].push(u),n[2].push(s)}var l=n.map((function(e){return e.join("    ")})).join("\n");e.push(l)}console.log("\nGame status: ".concat(this.checkStatus()," -- Current square: ").concat(null!==this.currentBoard?this.currentBoard+1:"None","\n\n").concat(e.join("\n\n"),"\n"))}}],[{key:"importBoard",value:function(t){var n=new e;return n.color=t.color,n.presence=t.presence,n.currentBoard=t.currentBoard,n.boards=t.boards.map((function(e){return y.importBoard(e)})),n.playerOneToMove=t.playerOneToMove,n}}]),e}(),E=n(14),O=n.n(E),P=function(e){switch(e){case"easy":return 3e3;case"intermediate":return 5e3;case"hard":return 1e4}},k=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.PLAYER_X;Object(f.a)(this,e),this.humanPlayer=r.PLAYER_X,this.board=new R,this.worker=void 0,this.resolvePromise=void 0,this.humanPlayer=n,this.worker=new O.a,this.worker.onmessage=function(e){"RPC"!==e.data.type&&t.resolvePromise(e.data)}}return Object(v.a)(e,[{key:"getBoard",value:function(){return this.board}},{key:"getState",value:function(){return{grid:this.board.getBoards(),selectedSquare:this.board.currentBoard,currentPlayer:this.board.getPlayerToMove(),winStatus:this.board.checkStatus()}}},{key:"performMove",value:function(e){return this.board.getAvailableMoves().includes(e)?(console.log("performed move: ".concat(e)),this.board.performMove(e),this.getState()):(console.log("tried to perform move ".concat(e,".\n available moves are \n ").concat(JSON.stringify(this.board.getAvailableMoves()))),this.getState())}},{key:"getNextAiMove",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,o,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e){i.resolvePromise=e})),o=P(t),this.worker.postMessage([this.board.exportBoard(),r.PLAYER_O,o]),e.next=5,n;case 5:a=e.sent,this.board=R.importBoard(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function w(){var e=Object(p.a)(["\n  border: 1px solid black;\n  background-color: ",";\n"]);return w=function(){return e},e}function A(){var e=Object(p.a)(["\n  & > button {\n    font-size: 1.5rem;\n    background-color: white;\n    border-radius: 8px;\n    padding: 8px;\n    cursor: pointer;\n    -webkit-appearance: none;\n\n    &:not(:last-child) {\n      margin-right: 16px;\n    }\n  }\n"]);return A=function(){return e},e}function S(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  position: relative;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n\n  ","\n  ","\n\n  ",";\n\n  &:after {\n    ","\n  }\n\n  ","\n"]);return S=function(){return e},e}function _(){var e=Object(p.a)(["\n  width: 60vmin;\n  height: 60vmin;\n\n  @media (max-width: 768px) {\n    width: 80vmin;\n    height: 80vmin;\n  }\n\n  @media (max-width: 480px) {\n    width: 95vmin;\n    height: 95vmin;\n  }\n"]);return _=function(){return e},e}function M(){var e=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n"]);return M=function(){return e},e}var L=d.a.div(M()),Y=d.a.div(_()),x=d.a.div(S(),(function(e){return e.isWon===r.PLAYER_X&&"border: 3px solid blue"}),(function(e){return e.isWon===r.PLAYER_O&&"border: 3px solid green"}),(function(e){return e.gap&&"\n  grid-gap: 64px;\n\n  @media (max-width: 768px) {\n    grid-gap: 16px;\n  }\n\n  @media (max-width: 480px) {\n    grid-gap: 8px\n  }\n"}),(function(e){return e.isWon&&"\n\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-color: ".concat(e.isWon===r.PLAYER_X?"blue":"green",";\n            opacity: 0.3;\n              ")}),(function(e){return e.isSelected&&"border: 3px solid yellow"})),B=d.a.div(A()),j=d.a.div(w(),(function(e){return function(e){switch(e){case"empty":return"white";case"player1":return"blue";case"player2":return"green"}}(e.state)})),X=new k,I=function(){var e=Object(o.useState)(X.getState()),t=Object(h.a)(e,2),n=t[0],i=n.grid,c=n.selectedSquare,u=n.currentPlayer,p=n.winStatus,d=t[1],f=Object(o.useState)(null),v=Object(h.a)(f,2),b=v[0],m=v[1],y=Object(o.useState)(null),g=Object(h.a)(y,2),R=g[0],E=g[1];return Object(o.useEffect)((function(){m(null)}),[c]),Object(o.useEffect)((function(){u===r.PLAYER_O&&function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X.getNextAiMove(R);case 4:d(X.getState());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u,R]),a.a.createElement(L,null,null===R?a.a.createElement(B,null,a.a.createElement("h1",null,"Select difficulty"),a.a.createElement("button",{onClick:function(){return E("easy")}},"Easy"),a.a.createElement("button",{onClick:function(){return E("intermediate")}},"Intermediate"),a.a.createElement("button",{onClick:function(){return E("hard")}},"Hard")):a.a.createElement(Y,null,p!==r.IN_PROGRESS&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,function(e,t){var n="";switch(e){case r.PLAYER_O:n="Robot wins! Better luck next time.";break;case r.PLAYER_X:n="You win! Congratulations on beating the ".concat(t," difficulty!");break;case r.DRAW:n="It's a draw!"}return"".concat(n," To start a new game, refresh the page.")}(p,R)),a.a.createElement("button",{onClick:function(){return window.location.reload()}},"Refresh")),p===r.IN_PROGRESS?u===r.PLAYER_X?a.a.createElement("p",null,"It is your turn to move"):a.a.createElement("p",null,"Robot is thinking..."):null,a.a.createElement(x,{gap:!0},i.map((function(e,t){return a.a.createElement(x,{key:t,isWon:[r.PLAYER_O,r.PLAYER_X].includes(X.getBoard().boards[t].checkStatus())&&X.getBoard().boards[t].checkStatus(),isSelected:t===c||t===b,onClick:function(){return e=t,void(u===r.PLAYER_X&&p===r.IN_PROGRESS&&X.getBoard().boards[e].checkStatus()===r.IN_PROGRESS&&null===c&&m(e));var e}},e.map((function(e,n){return a.a.createElement(j,{key:n,onClick:function(e){return function(e,t,n){if(u===r.PLAYER_X&&p===r.IN_PROGRESS&&(c===t&&(e.stopPropagation(),X.performMove(n),d(X.getState())),b===t)){var o=X.performMove(10*(b+1)+n);d(o)}}(e,t,n)},state:e})})))})))))};n(27);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.dd17109c.chunk.js.map